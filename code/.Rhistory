#clear memory and setup
rm(list=ls())
options(scipen=999)
library(tidyverse)
library(data.table)
library(modelsummary)
volumes <- read.csv('../temporary/volumes_scores.csv')
View(volumes)
#Merge volumes to closest bin
a = data.table(Value=volumes$Year) #Extract years
a[,merge:=Value] #Give data.table something to merge on
b = data.table(Value = bins)
b[,merge:=Value]
setkeyv(a, c('merge')) #Sort for quicker merge
setkeyv(b, c('merge'))
rounded = b[a, roll = 'nearest'] #Merge to nearest bin
rounded <- distinct(rounded) #Get distinct values for easier merge to 'volumes'
volumes <- merge(volumes, rounded, by.x = "Year", by.y = "merge")
#Remove unnecessary column
volumes <- volumes %>%
subset(select = -c(i.Value)) %>%
rename(bin = Value)
#Create years and bins
years <- seq(1510, 1890, by = 1)
bins <- seq(1510, 1890, by = 20)
#Merge volumes to closest bin
a = data.table(Value=volumes$Year) #Extract years
a[,merge:=Value] #Give data.table something to merge on
b = data.table(Value = bins)
b[,merge:=Value]
setkeyv(a, c('merge')) #Sort for quicker merge
setkeyv(b, c('merge'))
rounded = b[a, roll = 'nearest'] #Merge to nearest bin
rounded <- distinct(rounded) #Get distinct values for easier merge to 'volumes'
volumes <- merge(volumes, rounded, by.x = "Year", by.y = "merge")
#Remove unnecessary column
volumes <- volumes %>%
subset(select = -c(i.Value)) %>%
rename(bin = Value)
View(volumes)
volumes <- volumes %>%
filter(Year >= 1600)
volumes$bin <- as.factor(volumes$bin)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin, volumes)
summary(model)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion * bin, volumes)
summary(model)
model <- lm(progress_percentile ~ Religion * Science * relevel(bin, ref = 1610) +
Religion * Political.Economy * relevel(bin, ref = 1610) +
Science * Political.Economy * relevel(bin, ref = 1610) -
Religion * relevel(bin, ref = 1610), volumes)
summary(model)
model <- lm(progress_percentile ~ Religion * Science * relevel(bin, ref = 1) +
Religion * Political.Economy * relevel(bin, ref = 1) +
Science * Political.Economy * relevel(bin, ref = 1) -
Religion * relevel(bin, ref = 1), volumes)
summary(model)
volumes$bin <- as.factor(volumes$bin)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion -
Religion * bin +
Political.Economy +
bin +
Year, volumes)
summary(model)
volumes <- volumes %>%
filter(Year > 1600)
volumes$bin <- as.factor(volumes$bin)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion -
Religion * bin +
Political.Economy +
bin +
Year, volumes)
summary(model)
summary(model, cluster = c('Year'))
mod <- feols(optimism_percentile ~ Science +
Political.Economy +
Science*Political.Economy +
Science*Religion +
Religion*Political.Economy +
i(bin, Science, 1610) +
i(bin, Political.Economy, 1610) +
i(bin, Science*Religion, 1610) +
i(bin, Science*Political.Economy, 1610) +
i(bin, Political.Economy*Religion, 1610) +
i(bin, ref = 1610) -
Religion +
year_published, data = volumes, cluster = c("year_published"))
summary(mod)
library(fixest)
mod <- feols(optimism_percentile ~ Science +
Political.Economy +
Science*Political.Economy +
Science*Religion +
Religion*Political.Economy +
i(bin, Science, 1610) +
i(bin, Political.Economy, 1610) +
i(bin, Science*Religion, 1610) +
i(bin, Science*Political.Economy, 1610) +
i(bin, Political.Economy*Religion, 1610) +
i(bin, ref = 1610) -
Religion +
year_published, data = volumes, cluster = c("year_published"))
summary(mod)
mod <- feols(optimism_percentile ~ Science +
Political.Economy +
Science*Political.Economy +
Science*Religion +
Religion*Political.Economy +
i(bin, Science, 1610) +
i(bin, Political.Economy, 1610) +
i(bin, Science*Religion, 1610) +
i(bin, Science*Political.Economy, 1610) +
i(bin, Political.Economy*Religion, 1610) +
i(bin, ref = 1610) -
Religion +
Year, data = volumes, cluster = c("year_published"))
summary(mod)
mod <- feols(optimism_percentile ~ Science +
Political.Economy +
Science*Political.Economy +
Science*Religion +
Religion*Political.Economy +
i(bin, Science, 1610) +
i(bin, Political.Economy, 1610) +
i(bin, Science*Religion, 1610) +
i(bin, Science*Political.Economy, 1610) +
i(bin, Political.Economy*Religion, 1610) +
i(bin, ref = 1610) -
Religion +
Year, data = volumes, cluster = c("Year"))
summary(mod)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion -
Religion * bin +
Political.Economy +
bin +
Year, volumes)
summary(model)
mod <- feols(optimism_percentile ~ Science +
Political.Economy +
Science*Political.Economy +
Science*Religion +
Religion*Political.Economy +
i(bin, Science, 1610) +
i(bin, Political.Economy, 1610) +
i(bin, Science*Religion, 1610) +
i(bin, Science*Political.Economy, 1610) +
i(bin, Political.Economy*Religion, 1610) +
i(bin, ref = 1610) -
Religion +
Year, data = volumes, cluster = c("Year"))
summary(mod)
mod <- feols(progress_percentile ~ Science +
Political.Economy +
Science*Political.Economy +
Science*Religion +
Religion*Political.Economy +
i(bin, Science, 1610) +
i(bin, Political.Economy, 1610) +
i(bin, Science*Religion, 1610) +
i(bin, Science*Political.Economy, 1610) +
i(bin, Political.Economy*Religion, 1610) +
i(bin, ref = 1610) -
Religion +
Year, data = volumes, cluster = c("Year"))
summary(mod)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion -
Religion * bin +
Political.Economy +
bin +
Year, volumes)
summary(model)
mod <- feols(progress_percentile ~ Science +
Political.Economy +
Science*Political.Economy +
Science*Religion +
Religion*Political.Economy +
i(bin, Science, 1610) +
i(bin, Political.Economy, 1610) +
i(bin, Science*Religion, 1610) +
i(bin, Science*Political.Economy, 1610) +
i(bin, Political.Economy*Religion, 1610) +
i(bin, ref = 1610) -
Religion +
Year, data = volumes, cluster = c("Year"))
summary(mod)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion -
Religion * bin +
Political.Economy +
bin +
Year, volumes)
summary(model)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion * bin, volumes)
summary(model)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion * bin +
bin, volumes)
summary(model)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion -
Religion * bin +
Political.Economy +
bin +
Year, volumes)
summary(model)
model <- lm(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion * bin +
bin +
Year, volumes)
summary(model)
model <- feols(progress_percentile ~ Religion * Science * bin +
Religion * Political.Economy * bin +
Science * Political.Economy * bin -
Religion * bin +
bin +
Year, data = volumes)
summary(model)
mod <- feols(progress_percentile ~ Science +
Political.Economy +
Science*Political.Economy +
Science*Religion +
Religion*Political.Economy +
i(bin, Science, 1610) +
i(bin, Political.Economy, 1610) +
i(bin, Science*Religion, 1610) +
i(bin, Science*Political.Economy, 1610) +
i(bin, Political.Economy*Religion, 1610) +
i(bin, ref = 1610) -
Religion +
Year, data = volumes, cluster = c("Year"))
summary(mod)
